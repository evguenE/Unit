@model IEnumerable<Untt_test.Models.GuestList>
@{
    ViewBag.Title = "Home Page";
}

<style>
    .btn-green {
        background-color: green;
        color: white;
        /*font-size: 20px;*/
    }

    .btn-red {
        background-color: red;
        color: white;
        /*font-size: 20px;*/
    }

    .glyphicon-plus {
        font-size: 40px;
        padding-bottom: 30px;
    }

    .glyphicon-minus {
        font-size: 40px;
        padding-bottom: 30px;
    }

    /*#pl .glyphicon-plus {
          font-size: 40px;
          padding-bottom: 10px;
    }*/
</style>

@Scripts.Render("~/bundles/jquery")

    <style>
        .custom {
            text-decoration: underline;
        }
    </style>


    <div>
        <h1>Список гостей</h1>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <form class="navbar-form">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="search">
                        <div class="input-group-btn">
                            <button id="search" class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                    <br>


                </form>
                
              
                <div id="gl">
                    @{Html.RenderPartial("GuestList");}


                    @*@foreach (var it in ViewData["guest"] as IList<Untt_test.Models.GuestList>)
        {
            <div class="card card-block" style="border: 2px solid gray; width: 600px; border-radius: 10px;">
                <div class=" card-body">
                    <div class="row">
                        <div class="col-md-10">

                            <h5 class="card-title" style="padding:3px">@it.fio</h5>
                            <p class="card-text">
                                @it.email<br>
                                @it.phone<br>
                            </p>

                        </div>
                        <div class="col-md-2">
                            @{
                                if (it.flag == "0")
                                {
                                    <div class="btn-group-vertical pull-right">
                                        <button type="button" class="btn btn-green glyphicon-plus" style="border: 1px solid green; padding: 8px; margin-right: 2px"></button>
                                        <button type="button" class="btn  btn-green " style="border: 1px solid green; padding: 8px;"></button>
                                    </div>
                                }
                                if (it.flag == "1")
                                {
                                    <div class="btn-group-vertical pull-right">
                                        <button type="button" class="btn btn-red " style="border: 2px solid red; padding: 10px; margin-right: 2px"></button>
                                        <button type="button" class="btn  btn-red  glyphicon-minus" style="border: 2px solid red; padding: 10px; margin-right: 2px"></button>
                                    </div>
                                }
                                if (it.flag == "2")
                                {
                                    <div class="btn-group-vertical pull-right">
                                        <button id="#plus" type="button" class="btn glyphicon-plus btn-sm" value=@it.Id  style="padding-bottom: 0px; margin-right: 2px"></button>
                                        <button id="minus" type="button" class="btn glyphicon-minus btn-sm" value=@it.Id style="padding-bottom: 0px; margin-right: 2px"></button>
                                    </div>
                                }
                            }
                        </div>
                    </div>

                </div>
            </div>
            <br>
        }*@

                </div>
            </div>
            <div class="col-md-4">
                <p><a href="#allGuest" style="text-decoration: underline">Все гости</a></p>                                            
                <p><a href="#gl" style="text-decoration: underline">Гости посещающие мероприятие</a></p>                            
                <p><a href="#gll" style="text-decoration: underline">Гости не посещающие мероприятие</a></p>                       
            </div>

        </div>      

        <div class="row">
            <div class="col-md-8">         
                <button class="btn-primary">Закончить мероприятие</button> 
         
            </div>          
        </div>

    </div>   


<script>
    $(document).ready(function () {      

        //$(":button").each(function (i, el) {
        //    var cl = el.className;
          
        //    var val = el.value;
        //    $(el).on('click', function (event) {
        //        alert(event.data)
        //        $.ajax({
        //            url: 'Home/GuestList/',
        //            data: { flag: cl, id: val   },
        //            type: 'GET',
        //            contentType: 'application/json; charset=utf-8',
        //            success: function (response) {
        //                $('#gl').html(response);
        //            }
        //        });          
        //    })
        //});
        
        $(this).click("button", function (i, el) {
           
            var cl = i.target.attributes['0'].textContent;
            var val = i.target.value;

               
                $.ajax({
                    url: 'Home/GuestList/',
                    data: { flag: cl, id: val   },
                    type: 'GET',
                    contentType: 'application/json; charset=utf-8',
                    success: function (response) {
                        $('#gl').html(response);
                    }
                });          

        });

        $("search").click(function () {
            debugger
            $.ajax({
                url: 'Home/GuestList/',
                data: { flag: 'all' },
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    $('#gl').html(response);
                }
            });
        });


        $('a[href="#allGuest"]').click(function () {            
            $.ajax({
                url: 'Home/GuestList/',               
                data: { flag: 'all' },
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    $('#gl').html(response);
                }
            });
        });

        $('a[href="#gl"]').click(function () {                        
            $.ajax({
                url: 'Home/GuestList/',             
                data: {flag: "0"},
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (response)
                {
                    $('#gl').html(response);
                }
            });
        });

        $('a[href="#gll"]').click(function () {            
            $.ajax({
                url: 'Home/GuestList/',
                data: { flag: "1" },
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    $('#gl').html(response);
                }
            });

        });       

    })
</script>